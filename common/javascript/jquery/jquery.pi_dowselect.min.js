(function(a){a.fn.pi_dowselect=function(b){b=b||{};var c=a.extend({dows:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"]},b);var d=function(){if(typeof(this["pi_dowselect"])!=="undefined"){return}var h=a(this);var j=document.createElement("span");var g=a(j);var f="";for(var e=0;e<c.dows.length;e++){f+='<span class="pi-dow-inner" data-dow-code="'+e+'">'+c.dows[e]+"</span>"}g.addClass("pi_dow_selector").html(f);j.dow_elements={};j.dow$=g.find(".pi-dow-inner");j.dow$.each(function(){j.dow_elements["e"+a(this).data("dow-code")]=a(this)});j.pi_dowtarget=this;j.pi_dowtarg$=h;h.css({display:"none"});j.pi_setvalues=function(l){l=l||Array();if(typeof(l)==="string"){l=l.split(",")}this.dow$.removeClass("selected");for(var k=0;k<l.length;k++){if(typeof(this.dow_elements["e"+l[k]])!=="undefined"){a(this.dow_elements["e"+l[k]]).addClass("selected")}}return this};j.dow_setValue=function(){var i=Array();this.dow$.each(function(){var k=a(this);if(k.hasClass("selected")){i.push(k.data("dow-code"))}});i=i.join(",");this.pi_dowtarg$.val(i);return this};g.on("click",".pi-dow-inner",function(i){var k=a(this);if(k.hasClass("selected")){k.removeClass("selected")}else{k.addClass("selected")}i.delegateTarget.dow_setValue()});h.on("change",function(i){i.stopPropagation();i.preventDefault?i.preventDefault():i.returnValue=false;this.pi_dowselect.pi_setvalues(a(this).val())});g.insertAfter(h);this.pi_dowselect=j};return this.each(d)}})(jQuery);